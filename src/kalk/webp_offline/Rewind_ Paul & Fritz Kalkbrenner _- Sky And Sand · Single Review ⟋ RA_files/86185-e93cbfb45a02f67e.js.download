"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86185],{86185:function(n,e,t){t.d(e,{un:function(){return H},ZP:function(){return V},ej:function(){return _}});var r=t(90116),i=t(59499),a=t(4730),s=t(11163),o=t(58439),g=t(77601),l=t(54787),d=t(42721),u=t(39608),p=t(3570),c=t(2448),$=t(67294),f=t(86896),v=t(14598),F=t(94724),y=t(6805),m=t(51296),I=t(53775),O=t(62930),E=t(55356),T=t(78467),S=t(49369),b=t(85893),N=(0,S.Z)((function(){return t.e(46576).then(t.bind(t,46576))})),R=function(n){var e,t=n.type,r=n.selected,i=n.values,a=n.removeFilter,s=n.formatUrl,o=(0,f.Z)(),g=(0,$.useState)(!1),l=g[0],d=g[1],u=function(){return d(!l)},p=r?null===(e=i.find((function(n){var e;return(null===(e=n.value)||void 0===e?void 0:e.toLowerCase())===(null===r||void 0===r?void 0:r.toLowerCase())})))||void 0===e?void 0:e.name:o.formatMessage(P[t]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Z,{variant:F.Z.button.secondaryGrey,onClick:u,"data-button-tracking-id":"".concat(E.Z.openListingFilterModal,"-").concat(t.toLowerCase()),children:p}),(0,b.jsx)(y.M_,{children:l&&(0,b.jsx)(T.Z,{toggle:u,children:(0,b.jsx)(N,{formatUrl:s,removeFilter:a,selected:r,type:t,values:i})})})]})},P={YEAR:m.Z.year,COUNTRY:I.Z.country,GENRE:m.Z.genre,INDEX:O.Z.category};R.displayName="ListingFilter";var w,Z=R,D=t(17674),L=t(11752),A=t(11748),h=t(76689),j=t(11110),x=(0,L.default)().publicRuntimeConfig.INFINITE_SCROLL_CONFIG,z=(w={},(0,i.Z)(w,p.wD.Event,{default:j.YJ,modified:j.rN}),(0,i.Z)(w,p.wD.Review,{default:j.Em,modified:j.c0}),(0,i.Z)(w,p.wD.Contributor,{default:j.pI,modified:j.tr}),(0,i.Z)(w,p.wD.News,{default:j.QY,modified:j.lb}),w),U=function(n){var e=[];return Object.entries(n).forEach((function(n){var t,r=(0,D.Z)(n,2),i=r[0],a=r[1],s=null===(t=Object.values(p.lx))||void 0===t?void 0:t.find((function(n){return n===i.toUpperCase()}));if(s){var o=null;s===p.lx.Year&&"string"===typeof a&&a.endsWith("/")&&(o=a.slice(0,-1)),e.push({type:s,value:o||a})}})),e},_=function(n){var e,t,i,a,o=n.type,g=n.baseFilters,l=void 0===g?[]:g,d=n.aggregations,u=void 0===d?[]:d,c=n.pageSize,$=void 0===c?parseInt(x.INFINITE_SCROLL_PAGE_SIZE):c,f=n.sortOrder,v=n.sortField,F=n.defaultFilters,y=void 0===F?[]:F,m=n.queries,I=void 0===m?void 0:m,O=(0,s.useRouter)().query,E=U(O),T=0===E.length,S=[].concat((0,r.Z)(l),T?(0,r.Z)(y):(0,r.Z)(E)),b=(0,h.Z)(),N=b.initialPageNumber,R=b.onLoadNextPage,P=b.headPaginationAttributes,w=I||z[o],Z=(0,A.Z)(T?w.default:w.modified,{variables:{indices:p.Rj[o],pageSize:$,page:N,aggregations:u,filters:S,sortOrder:f,sortField:v,baseFilters:l},dataKey:"listing.data",onLoadNextPage:R});return{queryResult:Z,parsedQuery:E,filters:S,headPaginationAttributes:P,aggregationsData:T?null===Z||void 0===Z||null===(e=Z.data)||void 0===e||null===(t=e.aggregations)||void 0===t?void 0:t.aggregations:null===Z||void 0===Z||null===(i=Z.data)||void 0===i||null===(a=i.listing)||void 0===a?void 0:a.aggregations}},C=["page"];function G(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function q(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?G(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Y=function(n){var e=n.children,t=n.createSubNav,p=n.type,$=n.createContent,f=n.createPagination,v=n.baseFilters,F=n.aggregations,y=n.formatUrl,m=n.handleRemoveFilter,I=n.sortOrder,O=n.sortField,E=n.defaultFilters,T=n.queries,S=(0,g.Z)({defaultToIgnore:["slug","idOrCountry","username","page"]}),N=(0,s.useRouter)().query,R=_({type:p,baseFilters:v,aggregations:F,sortOrder:I,sortField:O,defaultFilters:E,queries:T}),P=R.queryResult,w=R.parsedQuery,D=R.filters,L=R.headPaginationAttributes,A=R.aggregationsData,h=function(n){var e=n.value,t=n.type,r=(N.page,(0,a.Z)(N,C));return y(q(q({},r),{},(0,i.Z)({},t.toLowerCase(),e)))},j=null===f||void 0===f?void 0:f(D.reduce((function(n,e){return[].concat((0,r.Z)(n),[e.type])}),[]),null!==P&&void 0!==P&&P.loading?[]:A);return(0,b.jsxs)(o.L9,{children:[t(null!==P&&void 0!==P&&P.loading?[]:null===A||void 0===A?void 0:A.map((function(n){var e;return(0,b.jsx)(Z,q(q({},n),{},{formatUrl:h,removeFilter:null!==m&&void 0!==m?m:S,selected:null===(e=w.find((function(e){return e.type===n.type})))||void 0===e?void 0:e.value}))}))),e,(0,b.jsx)(l.Z,q(q({},P),{},{dataKey:"listing.data",markup:$,handleEmpty:u.Z,backgroundColor:c.Z.grey[80]})),j,!j&&(0,b.jsx)(d.Z,{headPaginationAttributes:L,fetchingNextPage:null===P||void 0===P?void 0:P.fetchingNextPage,finishedPaginating:null===P||void 0===P?void 0:P.finishedPaginating,loading:null===P||void 0===P?void 0:P.loading})]})};Y.defaultProps={baseFilters:[],formatUrl:function(){return{}}},Y.Type=p.wD,Y.Aggregations=p.lx,Y.SortOrder=p.mX,Y.SortField=p.IA;var V=Y,W=t(18446),k=t.n(W),M=t(98325),B=t(14832),Q=t(58166);function X(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function K(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?X(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var J=function(n){var e,t=n.filtersData,i=n.defaultFirstYear,a=n.defaultEndYear,s=n.dateArchiveNavigationOptions,o=n.archiveNavigatorProps,g=(0,M.Z)(t)&&t.find((function(n){return n.type===V.Aggregations.Year})),l=null===g||void 0===g||null===(e=g.values)||void 0===e?void 0:e.map((function(n){return parseInt(n.value)})),d=g?Math.min.apply(Math,(0,r.Z)(l)):i,u=g?Math.max.apply(Math,(0,r.Z)(l)):a,p=(0,B.Z)(K({startDate:new Date(d,0),endDate:new Date(u,0)},s)),c=p.previous,$=p.next;return d===u?null:(0,b.jsx)(Q.Z,K({previous:c,next:$},o))},H=function(n,e,t,r,i){return function(a,s){return k()(a.sort(),n.sort())?(0,b.jsx)(J,{filtersData:s,defaultFirstYear:e,defaultEndYear:t,dateArchiveNavigationOptions:r,archiveNavigatorProps:i}):null}}},11110:function(n,e,t){t.d(e,{tr:function(){return L},pI:function(){return A},YJ:function(){return T},QY:function(){return x},DV:function(){return w},Em:function(){return N},rN:function(){return E},lb:function(){return j},hd:function(){return P},c0:function(){return b}});var r,i,a,s,o,g,l,d,u,p,c,$,f,v,F,y,m=t(71383),I=t(26076),O=(0,I.Ps)(r||(r=(0,m.Z)(["\n  fragment eventFragment on IListingItem {\n    ... on Event {\n      id\n      title\n      attending\n      date\n      startTime\n      contentUrl\n      queueItEnabled\n      flyerFront\n      newEventForm\n      images {\n        id\n        filename\n        alt\n        type\n        crop\n      }\n      artists {\n        id\n        name\n      }\n      venue {\n        id\n        name\n        contentUrl\n        live\n        area {\n          id\n          name\n          urlName\n          country {\n            id\n            name\n            urlCode\n          }\n        }\n      }\n      pick {\n        id\n        blurb\n      }\n    }\n  }\n"]))),E=(0,I.Ps)(i||(i=(0,m.Z)(["\n  query GET_EVENTS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n  ) {\n    listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n      data {\n        ...eventFragment\n      }\n      totalResults\n    }\n  }\n  ","\n"])),O),T=(0,I.Ps)(a||(a=(0,m.Z)(["\n  query GET_DEFAULT_EVENTS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n    $baseFilters: [FilterInput]\n  ) {\n    listing(\n      indices: $indices\n      aggregations: []\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      data {\n        ...eventFragment\n      }\n      totalResults\n    }\n    aggregations: listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $baseFilters\n      pageSize: 0\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n    }\n  }\n  ","\n"])),O),S=(0,I.Ps)(s||(s=(0,m.Z)(["\n  fragment reviewFragment on IListingItem {\n    ... on Review {\n      id\n      index\n      title\n      date\n      imageUrl\n      contentUrl\n      recommended\n      blurb\n      labels {\n        id\n        name\n        contentUrl\n        live\n      }\n      author {\n        id\n        name\n        imageUrl\n        username\n        contributor\n      }\n    }\n  }\n"]))),b=(0,I.Ps)(o||(o=(0,m.Z)(["\n  query GET_REVIEWS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n  ) {\n    listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n      data {\n        ...reviewFragment\n      }\n      totalResults\n    }\n  }\n  ","\n"])),S),N=(0,I.Ps)(g||(g=(0,m.Z)(["\n  query GET_DEFAULT_REVIEWS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n    $baseFilters: [FilterInput]\n  ) {\n    listing(\n      indices: $indices\n      aggregations: []\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      data {\n        ...reviewFragment\n      }\n      totalResults\n    }\n    aggregations: listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $baseFilters\n      pageSize: 0\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n    }\n  }\n  ","\n"])),S),R=(0,I.Ps)(l||(l=(0,m.Z)(["\n  fragment recommendedReviewFragment on IListingItem {\n    ... on Review {\n      id\n      index\n      title\n      date\n      imageUrl\n      contentUrl\n      blurb\n      labels {\n        id\n        name\n        contentUrl\n        live\n      }\n      author {\n        id\n        name\n        imageUrl\n        username\n        contributor\n      }\n    }\n  }\n"]))),P=(0,I.Ps)(d||(d=(0,m.Z)(["\n  query GET_RECOMMENDED_REVIEWS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n  ) {\n    listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n      data {\n        ...recommendedReviewFragment\n      }\n      totalResults\n    }\n  }\n  ","\n"])),R),w=(0,I.Ps)(u||(u=(0,m.Z)(["\n  query GET_DEFAULT_RECOMMENDED_REVIEWS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n    $baseFilters: [FilterInput]\n  ) {\n    listing(\n      indices: $indices\n      aggregations: []\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      data {\n        ...recommendedReviewFragment\n      }\n      totalResults\n    }\n    aggregations: listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $baseFilters\n      pageSize: 0\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n    }\n  }\n  ","\n"])),R),Z=(0,I.Ps)(p||(p=(0,m.Z)(["\n  fragment newsFragment on IListingItem {\n    ... on News {\n      id\n      index\n      live\n      headline\n      date\n      imageUrl\n      type\n      title\n      blurb\n      contentUrl\n    }\n  }\n"]))),D=(0,I.Ps)(c||(c=(0,m.Z)(["\n  fragment featureFragment on IListingItem {\n    ... on Feature {\n      id\n      index\n      title\n      blurb\n      featureDate: date\n      featureType: type\n      images {\n        imageUrl\n        type\n      }\n      imageListingUrl\n      contentUrl\n      series {\n        id\n        seriesRef\n        title\n        contentUrl\n      }\n      featured\n      youtubeId\n    }\n  }\n"]))),L=(0,I.Ps)($||($=(0,m.Z)(["\n  query GET_CONTRIBUTOR_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n  ) {\n    listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n      data {\n        ...reviewFragment\n        ...newsFragment\n        ...featureFragment\n      }\n      totalResults\n    }\n  }\n  ","\n  ","\n  ","\n"])),S,Z,D),A=(0,I.Ps)(f||(f=(0,m.Z)(["\n  query GET_DEFAULT_CONTRIBUTOR_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n    $baseFilters: [FilterInput]\n  ) {\n    listing(\n      indices: $indices\n      aggregations: []\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      data {\n        ...reviewFragment\n        ...newsFragment\n        ...featureFragment\n      }\n      totalResults\n    }\n    aggregations: listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $baseFilters\n      pageSize: 0\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"])),S,Z,D),h=(0,I.Ps)(v||(v=(0,m.Z)(["\n  fragment newsFragment on IListingItem {\n    ... on News {\n      id\n      index\n      live\n      headline\n      date\n      imageUrl\n      type\n      title\n      blurb\n      contentUrl\n    }\n  }\n"]))),j=(0,I.Ps)(F||(F=(0,m.Z)(["\n  query GET_NEWS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n  ) {\n    listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n      data {\n        ...newsFragment\n      }\n      totalResults\n    }\n  }\n  ","\n"])),h),x=(0,I.Ps)(y||(y=(0,m.Z)(["\n  query GET_DEFAULT_NEWS_LISTING(\n    $indices: [IndexType!]\n    $aggregations: [ListingAggregationType!]\n    $filters: [FilterInput]\n    $pageSize: Int\n    $page: Int\n    $sortField: FilterSortFieldType\n    $sortOrder: FilterSortOrderType\n    $baseFilters: [FilterInput]\n  ) {\n    listing(\n      indices: $indices\n      aggregations: []\n      filters: $filters\n      pageSize: $pageSize\n      page: $page\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      data {\n        ...newsFragment\n      }\n      totalResults\n    }\n    aggregations: listing(\n      indices: $indices\n      aggregations: $aggregations\n      filters: $baseFilters\n      pageSize: 0\n      sortField: $sortField\n      sortOrder: $sortOrder\n    ) {\n      aggregations {\n        type\n        values {\n          value\n          name\n        }\n      }\n    }\n  }\n  ","\n"])),h)},3570:function(n,e,t){t.d(e,{IA:function(){return u},Iv:function(){return i},Rj:function(){return o},ar:function(){return l},lx:function(){return g},mX:function(){return d},wD:function(){return s}});var r,i,a=t(59499),s={Event:"EVENT",Review:"REVIEW",Contributor:"CONTRIBUTOR",News:"NEWS"},o=(r={},(0,a.Z)(r,s.Event,["EVENT"]),(0,a.Z)(r,s.Review,["REVIEW"]),(0,a.Z)(r,s.Contributor,["FEATURE","NEWS","REVIEW"]),(0,a.Z)(r,s.News,["NEWS"]),r),g={Year:"YEAR",Country:"COUNTRY",Artist:"ARTIST",DateRange:"DATERANGE",Promoter:"PROMOTER",Club:"CLUB",Genre:"GENRE",ReviewType:"REVIEWTYPE",Language:"LANGUAGE",Recommended:"RECOMMENDED",Author:"AUTHOR",Index:"INDEX",EventType:"EVENTTYPE",Pick:"PICK",Area:"AREA"};!function(n){n.EventDate="eventDate",n.Attending="attending",n.EventDatePosted="eventDatePosted",n.Date="date",n.Area="area",n.Areas="areas",n.ListingDate="listingDate",n.Genre="genre",n.ListingPosition="listingPosition",n.IsPick="isPick",n.EventType="eventType"}(i||(i={}));Object.freeze(i);var l={Event:"event",Artist:"artist",Club:"club",Promoter:"promoter",Label:"label",Area:"area",News:"news",Review:"review",Feature:"feature"},d={Ascending:"ASCENDING",Descending:"DESCENDING"},u={Date:"DATE",EventDate:"EVENTDATE",ReviewDate:"REVIEWDATE"}}}]);
//# sourceMappingURL=86185-e93cbfb45a02f67e.js.map